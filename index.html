<!DOCTYPE html>
<html lang="en">
    <head>
        <title>WebSocket Client</title>
    </head>
    <body>
        <div id="touch" style="width: 100%; height: 100vh; background-color: black;"></div>
        <button>Righ click</button>
        <script>
            const ws = new WebSocket('ws://192.168.215.223:8080');

            let screen = document.getElementById('touch');
            let touchStartTime = 0;
            const tapThreshold = 200;

            screen.addEventListener('touchmove', (event) => {
                event.preventDefault();
                const touchX = event.touches[0].clientX;
                const touchY = event.touches[0].clientY;
                const touchData = { x: touchX, y: touchY, s: 'e', click: false };
                ws.send(JSON.stringify(touchData));
            });

            screen.addEventListener('touchstart', (event) => {
                touchStartTime = Date.now();
                const touchX = event.touches[0].clientX;
                const touchY = event.touches[0].clientY;
                const touchData = { x: touchX, y: touchY, s: 's', click: false };
                ws.send(JSON.stringify(touchData));
            });

            screen.addEventListener('touchend', (event) => {
                const touchDuration = Date.now() - touchStartTime;
                if (touchDuration < tapThreshold && event.touches.length === 0) {
                    const data = 'clicked';
                    ws.send(data);
                }
            });
        </script>
    </body>
</html>
